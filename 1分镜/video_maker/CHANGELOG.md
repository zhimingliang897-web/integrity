# 更新日志

## v7 — API 自动生成素材
- 新增 `gen_text.py`：一条命令生成文本 + 图片
- 通义千问 API 自动生成对话文本（`qwen3-max-2026-01-23`）
- 通义万相 API 自动生成四宫格插图（`wanx2.1-t2i-turbo`）
- 自动创建项目文件夹和 `input/` 目录
- 已有文件会提示是否覆盖，图片不满意可手动替换

## v6 — 慢速版 + 中文字体修复
- 每次运行自动生成两个视频：正常版 + 慢速版（`_slow.mp4`，语速 -30%）
- Edge TTS `rate` 参数控制语速
- 片尾核心表达卡片间隔从 4 秒增至 6 秒

## v5 — 视频内容增强
- 双语字幕：台词用 `|` 分隔英中文，字幕双行显示
- 开头标题卡：文本第一行识别为标题，黑底白字显示 3 秒
- 片尾核心表达卡片：`===` 之后的内容自动生成卡片附在视频末尾
- 修复中文乱码：卡片和字幕改用微软雅黑字体

## v4 — 多项目文件夹
- `python make_video.py <文件夹名>` 支持多项目独立运行
- 每个项目有自己的 `input/` 和 `output/`
- 输出视频自动以文件夹名命名

## v3 — 自动解析文本
- 代码自动读取 `文本.txt`，不再需要手写 `config.json`
- 支持 `M1/F1` 角色格式 + `---` 场景分隔
- 自动去除括号内舞台提示（如 `(laughs)`）
- 根据场景数自动计算图片网格布局

## v2 — 多角色配音
- 支持男女分声配音（`voices` 字典）
- 声音池自动分配：M1→男声1, F1→女声1, 以此类推
- 字幕移至底部黑色区域，不再遮挡画面

## v1 — 基础版
- 读取 `config.json` + 图片 + 文本
- Edge TTS 生成语音，按语音时长决定画面显示时长
- FFmpeg 切图、拼音频、烧字幕、合成视频
